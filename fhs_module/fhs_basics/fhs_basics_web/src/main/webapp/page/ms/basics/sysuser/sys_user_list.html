<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<%
	layout("/page/tags/js_css_include.html",{up:true}){}
	layout("/page/tags/rende_loading.html",{}){}
	%>
	<script src="${fhs_static_url}/js/jQuery.md5.js"></script>
</head>
<body>

<table id="sysUserGrid" title="${parameter.organizationName}用户列表" class="easyui-datagrid"
	   fit="true" style="width: 90%;" url="${basePath}ms/sysUser/findPage/${parameter.organizationId}"
	   pagination="true" rownumbers="true" fitColumns="true"
	   singleSelect="true" pageSize="10" striped="true" toolbar="#toolbar">
	<thead>
	<tr>
		<th align='center' field="userId" hidden="true"></th>
		<th align='center' field="userName" width="15%">用户名</th>
		<th align='center' field="userLoginName" width="15%">登录名</th>
		<th align='center' field="transMap.sexName" width="10%">性别</th>
		<th align='center' field="transMap.orgName" width="19%">机构</th>
		<th align='center' field="mobile" width="10%">电话</th>
		<th align='center' field="email" width="20%">邮箱</th>
		<th align='center' field="transMap.isEnableName" width="10%">状态</th>
	</tr>
	</thead>
</table>


<div id="toolbar">
	<div style="margin-bottom: 5px;">
		<#shiro name="sysUser:see">
		<input type="text" id="userNameF" placeholder="用户名">
		<a href="javascript:void(0)" class="easyui-linkbutton"
		   plain="true" iconCls="icon-search" onclick="reload()">查询</a>
		<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-view" plain="true" onclick="addSelectRowFun('sysUserGrid',view);">查看</a>
		</#shiro>
		<#shiro name="sysUser:add">
	    <a href="javascript:void(0)" class="easyui-linkbutton" plain="true" iconCls="icon-add" onclick="addUser()">添加</a>
		</#shiro>
		<#shiro name="sysUser:update">
		<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="addSelectRowFun('sysUserGrid',update);">修改</a>
		</#shiro>
		<#shiro name="sysUser:del">
		<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="pubDel('sysUserGrid','${basePath}ms/sysUser/delSysUser?id=','userId');">删除</a>
		</#shiro>

	</div>
</div>
<div id="addOrUpdateDialog" class="easyui-dialog" title="添加/修改用户"
	 data-options="iconCls:'icon-save'"  closed="true"
	 style="width: 900px; height: 510px; padding: 10px;max-height: 95%" buttons="#dlg-buttons">
</div>
<div id="dlg-buttons">
	<a href="#" id="saveButten" class="easyui-linkbutton" onclick="save()">保存</a> <a
		href="#" class="easyui-linkbutton" onclick="closeDialog()">返回</a>
</div>
</body>

<script type="text/javascript">

    /**
     * 添加用户
     */
    function addUser() {
        openDialog('${basePath}/b/page-ms-basics-sysuser/sys_user_add_update?organizationId=${parameter.organizationId}&isAdd=true', '添加用户');
    }

    /**
     * 修改用户
     */
    function update(row) {
        openDialog('${basePath}/b/page-ms-basics-sysuser/sys_user_add_update?isEdit=true&id=' + row.userId, '修改用户');
    }

    /**
	 * 查看用户
	 */
	function view(row) {
		openDialog('${basePath}/b/page-ms-basics-sysuser/sys_user_add_update?isView=true&id='+row.userId, '查看用户');
	}

    //重新加载
    function reload() {
        $('#sysUserGrid').datagrid('load', {
            'userName' : $('#userNameF').val()
        });
    }


</script>
</html>
